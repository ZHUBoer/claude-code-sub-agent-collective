## PRD: 参数 Diff 能力（JSON）

**版本**: 1.0
**日期**: 2025-09-11

### 1. 背景与目标

**背景**:
当前已存在“接口入参——对比结果”的弹窗，可以对接口的参数进行 Diff。为了提高工具的灵活性和适用场景，需要增加一个允许用户直接输入两个 JSON 对象进行手动对比的功能。

**目标**:
在现有功能基础上，为开发者提供一个快速、便捷的 JSON 对比工具，支持自定义忽略属性，以满足更广泛的调试和验证需求。

### 2. 功能需求

**FR-01: 入口**
- **描述**: 在 `@src/pages/ApiCompare/` 模块中，提供一个名为“参数 diff能力（json）”的按钮。
- **动作**: 用户点击该按钮后，弹出一个用于 JSON 对比的 Modal 窗口。

**FR-02: Modal 窗口布局**
- **标题**: Modal 顶部标题文案为“参数 diff能力（JSON）”。
- **顶部操作区**:
  - 1个 Select 多选框，用于“忽略属性”。
  - 3个功能按钮。
- **中间输入区**:
  - 2个 Textarea 或 Code Editor 输入框，供用户粘贴或输入 JSON 数据。
- **底部展示区**:
  - 1个表格或视图，用于展示两个 JSON 数据的对比结果。

**FR-03:核心对比功能**
- **数据输入**: 用户可以在两个输入框中分别填入 JSON 字符串。
- **自动美化**: 点击“对比”按钮时，系统需先对用户输入的两个 JSON 字符串进行自动格式化（美化），然后再进行 Diff 计算。
- **对比逻辑**: 复用现有“接口入参——对比结果”的 Diff 计算和展示逻辑。

**FR-04: 忽略属性功能**
- **描述**: 用户可以通过顶部的“忽略属性”Select 多选框来指定在 Diff 计算中需要忽略的字段（key）。
- **预置项**: 不需要预置任何默认的忽略项，用户可根据需要自行选择。

**FR-05: 结果展示**
- **单一结果**: Diff 结果表格仅展示当前“手动 JSON 对比”这一组数据的结果。
- **范围**: 不考虑多组对比结果的管理和历史记录。

### 3. 非功能需求

- **NFR-01: 性能**: JSON 对比计算应在客户端完成，对于中等大小的 JSON（如 500KB 以内）应在 2 秒内响应。
- **NFR-02: 易用性**: 界面布局清晰，交互符合直觉。JSON 输入框应支持常见的代码编辑快捷键。

### 4. 验收标准

- [ ] 点击“参数 diff能力（json）”按钮能正常弹出 Modal。
- [ ] 在 Modal 中输入两个合法的 JSON，点击“对比”按钮后能正确展示 Diff 结果。
- [ ] “对比”前，JSON 字符串被成功自动格式化。
- [ ] 在“忽略属性”中选择一个或多个字段后，Diff 结果中不再显示这些字段的差异。
- [ ] 界面布局和文案与需求描述完全一致。
